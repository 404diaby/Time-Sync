<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Sync</title>
    <link rel="stylesheet" href="./style.css">
    
</head>
<body>
    <main id="container">
        <div>
            <p>
                <span id="timeZone"></span>
                <span class="material-symbols-outlined" data-micromodal-trigger="modal-1">
                edit_square
                </span>
            </p>
            <p id="currentTime"></p>
            <p id="date"></p>
       </div>
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/dayjs/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs/plugin/timezone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs/plugin/utc.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/micromodal/dist/micromodal.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/micromodal/dist/micromodal.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script>
     window.addEventListener('DOMContentLoaded', () => { MicroModal.init() });
     
        dayjs.extend(dayjs_plugin_utc);
        dayjs.extend(dayjs_plugin_timezone);



        let timeZoneO = document.getElementById('timeZone');
        let timeO = document.getElementById('currentTime');
        let dateO = document.getElementById('date');

        var myInterval;

        
   
        const App = (userTimeZone) => {
            timeZoneO.textContent =  userTimeZone;
            myInterval = setInterval(() => {
                timeO.textContent = dayjs().tz(userTimeZone).format('HH:mm:ss');
            }, 1000); 
            dateO.textContent = dayjs().tz(userTimeZone).format(`dddd, DD MMM, YYYY`);
        }

            App(dayjs.tz.guess())

        const select = (value) =>{
            console.log('ici')
               clearInterval(myInterval)
               !value ?  App(dayjs.tz.guess()) : App(value);
                
        }
        
    </script>

    <div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
        <div class="modal__overlay" tabindex="-1" data-micromodal-close>
            <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
                <header class="modal__header">
                    <h2 class="modal__title" id="modal-1-title">
                        Change Timezone
                    </h2>
                </header>
                <main class="modal__content" id="modal-1-content">
                    
                    
                        <select onchange="select(this.value)" >
                            <option value="">pike a time zone</option>
                            <option value="Africa/Lagos">Lagos</option>
                            <option value="Europe/Paris">Paris</option>
                            <option value="America/New_York">New York</option>
                            <option value="Asia/Tokyo">Tokyo</option>
                            <option value="Australia/Sydney">Sydney</option>
                            
                        </select>
                        <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Apply</button>
                
                    
                </main>
            </div>
        </div>
    </div>
<body>
</html>